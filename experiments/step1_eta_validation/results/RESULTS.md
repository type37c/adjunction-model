# Step 1: ηの物理的意味の検証実験 - 結果報告

**実験日**: 2026-02-19  
**実験時間**: 約5分  
**データポイント数**: 1,920  
**結論**: **シナリオC - ηは物理的相互作用に対して完全に不変**

---

## 1. 実験概要

### 1.1. 目的

F/Gの再構成誤差ηが、物理的相互作用において意味のある信号を出すかを検証する。

### 1.2. 実験設計

- **オブジェクト**: box（立方体）, cup（円柱）, bowl（球）
- **行動**: 静止観察、視点変更（8方向）、押す、倒す、回転
- **試行回数**: 各オブジェクト×各行動×5回
- **測定指標**: η = ||G(F(x)) - x||²（再構成誤差）

---

## 2. 主要な発見

### 2.1. ηは完全に定数

**全1,920データポイントでηが完全に同一の値（0.025155）を示した。**

- **標準偏差**: 0.000000
- **変動係数**: 0.000000
- **ユニークな値の数**: 1

これは、以下を意味する：

1. オブジェクトの種類（box, cup, bowl）によらずηは同じ
2. 行動の種類（静止、押す、倒す、回転）によらずηは同じ
3. 視点の変更（8方向）によってもηは同じ
4. オブジェクトの位置・姿勢の変化によってもηは同じ

### 2.2. 統計的証拠

```
Overall Statistics:
- Mean: 0.025155
- Std:  0.000000
- Min:  0.025155
- Max:  0.025155
- Coefficient of Variation: 0.000000
```

### 2.3. 視覚的証拠

生成された3つのプロットすべてで、ηが水平な直線として表示される：

1. **eta_by_action_boxplot.png**: すべての行動でηが単一の点
2. **eta_timeseries.png**: 時系列で完全に平坦な直線
3. **eta_vs_position.png**: オブジェクトの位置とηの間に相関なし（すべて同じη値）

---

## 3. 結果の解釈

### 3.1. なぜηが不変なのか？

以下の3つの可能性が考えられる：

#### 可能性1: F/Gの再構成能力が高すぎる

Phase 1で訓練されたF/Gが、どのような点群に対しても同程度の再構成誤差を出すほど汎化性能が高い。この場合、ηは「理解の深さ」を測る指標として機能していない。

#### 可能性2: PyBulletの点群とPhase 1の訓練データの分布が大きく異なる

PyBulletから取得した点群の品質（ノイズ、密度、正規化方法）が、Phase 1の訓練データと大きく異なるため、F/Gが常に同じ（高い）再構成誤差を出している。

#### 可能性3: 点群の正規化が過度に行われている

`normalize_point_cloud`関数がすべての点群を単位球に正規化しているため、オブジェクトの形状情報が失われ、F/Gから見るとすべて同じに見えている。

### 3.2. 最も可能性が高い原因

**可能性3（正規化の問題）が最も可能性が高い**と考えられる。理由：

1. Phase 1の訓練では、オブジェクトごとに異なる絶対的なスケールと位置を持つ点群を使用していた可能性がある
2. Step 1では、すべての点群を単位球に正規化してからF/Gに入力している
3. この正規化により、box、cup、bowlの形状の違いが失われ、すべて「単位球内のランダムな点群」として扱われている

---

## 4. 実験設計の問題点

### 4.1. 正規化の過度な適用

`point_cloud_utils.py`の`normalize_point_cloud`関数が、すべての点群を中心化してスケーリングしている。これにより：

- オブジェクトの絶対的なサイズ情報が失われる
- オブジェクトの相対的な形状情報のみが残る
- しかし、box、cup、bowlはすべて単純な幾何形状なので、正規化後の形状特徴が似通っている可能性がある

### 4.2. Phase 1の訓練データとの不整合

Phase 1でF/Gを訓練した際のデータ前処理方法と、Step 1でPyBulletから取得した点群の前処理方法が異なる可能性がある。

---

## 5. 次のステップへの示唆

### 5.1. 即座に必要な修正

**Step 1を再実行する前に、以下を確認・修正する必要がある：**

1. **Phase 1の訓練データの前処理方法を確認**:
   - Phase 1で点群をどのように正規化していたか？
   - 絶対的なスケール情報を保持していたか？

2. **正規化方法を統一**:
   - Phase 1と同じ前処理をStep 1でも適用する
   - または、正規化を行わずに生の点群をF/Gに入力する

3. **F/Gの出力を可視化**:
   - F(x)のアフォーダンス特徴が、オブジェクトごとに異なっているかを確認
   - G(F(x))の再構成結果を可視化し、元の点群と比較

### 5.2. Phase 2.1の報酬設計への影響

**現時点では、Phase 2.1の報酬設計を議論する段階にない。**

理由：

- ηが物理的相互作用に対して全く反応しないため、内発的報酬 `r_intrinsic = α · Δη` が常にゼロになる
- 報酬の二重構造 `r(t) = α · r_intrinsic + β · r_task` を導入しても、内発的報酬の項が機能しない
- F/GとAgent Cの随伴を検証する前に、F/Gそのものの動作を修正する必要がある

### 5.3. F/Gの改善が必要

**Step 1の結果は、Phase 1のF/G訓練を見直す必要があることを示唆している。**

具体的には：

1. **訓練データの多様化**: 基本3形状（立方体、球、円柱）だけでなく、より複雑な形状を含める
2. **データ拡張の改善**: 回転、スケーリング、ノイズ追加などのデータ拡張を適切に行う
3. **アーキテクチャの見直し**: 現在のPointNet-styleエンコーダーが、形状の違いを十分に捉えられているかを検証
4. **損失関数の見直し**: 再構成誤差だけでなく、アフォーダンス特徴の多様性を促す正則化項を追加

---

## 6. 結論

**Step 1の実験は成功したが、結果は予想外だった。**

- **技術的成功**: 実験は計画通りに実行され、1,920データポイントを収集し、分析を完了した
- **科学的発見**: ηが物理的相互作用に対して完全に不変であることが判明した
- **プロジェクトへの影響**: Phase 2.1の報酬設計を議論する前に、F/Gの改善が必要であることが明確になった

**この発見は、Phase 2 v1で「100%精度の罠」に陥ったのと同様に、実験的検証の重要性を示している。**

理論的に美しい報酬設計を考えても、その基盤となるF/Gが機能していなければ、すべてが砂上の楼閣となる。Step 1を実行したことで、この問題を早期に発見できたことは、プロジェクトにとって大きな価値がある。

---

## 7. 推奨される次のアクション

### 優先度1: Phase 1の訓練データ前処理を確認

Phase 1でどのようにデータを前処理していたかを確認し、Step 1と整合性を取る。

### 優先度2: Step 1を修正して再実行

正規化方法を修正し、ηが物理的相互作用に対して変化するかを再検証する。

### 優先度3: F/Gの出力を可視化

F(x)とG(F(x))を可視化し、F/Gが実際に何を学習しているかを理解する。

### 優先度4（条件付き）: Phase 1の再訓練

Step 1の修正後もηが不変である場合、Phase 1のF/G訓練を見直す。

---

**付録**: 
- 統計データ: `statistics.csv`
- 可視化: `plots/eta_by_action_boxplot.png`, `plots/eta_timeseries.png`, `plots/eta_vs_position.png`
- 生データ: `data/{box,cup,bowl}/eta_observations_*.csv`
